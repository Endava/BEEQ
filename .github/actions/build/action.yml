name: Build
description: Run linters and build the project within the NX.

runs:
  using: composite
  steps:
    - name: 🕵️‍♀️ Derive appropriate SHAs for base and head for `nx affected` commands
      uses: nrwl/nx-set-shas@v3

    - name: 🩺 Run Linters and Unit Tests
      run: npx nx affected --target=test --exclude=workspace --output-style=stream-without-prefixes -- --ci --code-coverage --runInBand
      shell: bash

    - name: ⏳ Build
      run: npm run build
      shell: bash
